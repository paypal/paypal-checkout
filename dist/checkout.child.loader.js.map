{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./src/loader/config.js","webpack:///./src/loader/responder.js","webpack:///./src/loader/component.js","webpack:///./src/loader/util.js","webpack:///./src/loader/load.js","webpack:///./src/loader/interface.js","webpack:///./src/lib/namespace.js","webpack:///./src/loader/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","config","checkoutjs_url","major_version","latest_version","xcomponent","ppcheckout","xchild_global","name_separator","script_props","responder","callbacks","loaded","err","res","flush","shift","respond","error","result","listen","callback","push","isCheckoutXComponent","window","name","seg","split","getVersion","Error","replace","isLatest","version","Boolean","loadScript","url","prop","attrs","container","document","body","head","script","createElement","src","addEventListener","keys","attr","setAttribute","appendChild","warn","args","message","join","console","log","parseQuery","queryString","location","search","params","indexOf","slice","pair","decodeURIComponent","stringifyError","level","toString","stack","newErr","integrationResponder","onLoadCheckoutIntegration","getIntegrationURLs","latest","major","minor","getIntegrationProps","props","query","env","stage","loadCheckoutIntegration","urls","Date","now","extendNamespace","xports","namespaces","childnamespaces","namespace","childname","childnamespace","_interface","require"],"mappings":"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","file":"checkout.child.loader.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/* @flow */\n\nexport const config = {\n    checkoutjs_url: 'https://www.paypalobjects.com/api/checkout{version}.js',\n    major_version:  '4',\n    latest_version: 'latest',\n    xcomponent:     'xcomponent',\n    ppcheckout:     'ppcheckout',\n    xchild_global:  'xchild',\n    name_separator: '__',\n\n    script_props: {\n        'data-paypal-checkout': '',\n        'data-no-bridge':       '',\n        'data-state':           'ppxo_checkout'\n    }\n};\n","/* @flow */\n\nexport function responder() : { respond : (error : ?Error, result : ?mixed) => void, listen : (callback : (error : ?Error, result : ?mixed) => void) => void } {\n\n    const callbacks = [];\n    let loaded = false;\n\n    let err;\n    let res;\n\n    function flush() {\n        if (loaded) {\n            while (callbacks.length) {\n                callbacks.shift()(err, res);\n            }\n        }\n    }\n\n    function respond(error : ?Error, result : ?mixed) {\n\n        loaded = true;\n        err    = error;\n        res    = result;\n\n        flush();\n    }\n\n    function listen(callback : (error : ?Error, result : ?mixed) => void) {\n        callbacks.push(callback);\n        flush();\n    }\n\n    return { respond, listen };\n}\n","/* @flow */\n\nimport { config } from './config';\n\nexport function isCheckoutXComponent() : boolean {\n    if (window.name) {\n        const seg = window.name.split(config.name_separator);\n\n        if (seg[0] === config.xcomponent && seg[1] === config.ppcheckout) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function getVersion() : string {\n\n    if (!isCheckoutXComponent()) {\n        throw new Error(`Can not get version for non-zoid-component`);\n    }\n\n    return window.name.split(config.name_separator)[2].replace(/_/g, '.');\n}\n\nexport function isLatest() : boolean {\n\n    if (!isCheckoutXComponent()) {\n        return false;\n    }\n\n    const version = getVersion();\n\n    return Boolean(version === config.major_version || version === config.latest_version);\n}\n","/* @flow */\n\nexport function loadScript(url : string, prop : string, attrs : Object, callback : (err : ?Error, res : ?mixed) => void) : void {\n\n    if (window[prop]) {\n        return callback(null, window[prop]);\n    }\n\n    const container = document.body || document.head;\n\n    if (!container) {\n        return callback(new Error(`Can not find container to insert script into`));\n    }\n\n    const script = document.createElement('script');\n\n    script.src = url;\n\n    script.addEventListener('load', () => {\n        if (!window[prop]) {\n            return callback(new Error(`Expected ${ prop } to be present on window`));\n        }\n\n        return callback(null, window[prop]);\n    });\n\n    // $FlowFixMe\n    script.addEventListener('error', (err : Error) => {\n        return callback(err);\n    });\n\n    for (const attr of Object.keys(attrs)) {\n        script.setAttribute(attr, attrs[attr]);\n    }\n\n    container.appendChild(script);\n}\n\nexport function warn(...args : $ReadOnlyArray<string>) {\n    const message = args.join(' ');\n\n    if (window.console && window.console.warn) {\n        window.console.warn(message);\n    } else if (window.console && window.console.log) {\n        window.console.log(message);\n    }\n}\n\nexport function parseQuery(queryString : string = window.location.search) : Object {\n\n    const params = {};\n\n    if (queryString && queryString.indexOf('?') === 0) {\n        queryString = queryString.slice(1);\n    }\n\n    if (!queryString) {\n        return params;\n    }\n\n    if (queryString.indexOf('=') === -1) {\n        throw new Error(`Can not parse query string params: ${ queryString }`);\n    }\n\n    for (let pair of queryString.split('&')) {\n        pair = pair.split('=');\n\n        if (pair[0] && pair[1]) {\n            params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n        }\n    }\n\n    return params;\n}\n\nexport function stringifyError(err : mixed, level : number = 1) : string {\n\n    if (level >= 3) {\n        return 'stringifyError stack overflow';\n    }\n\n    try {\n        if (!err) {\n            return `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n        }\n\n        if (typeof err === 'string') {\n            return err;\n        }\n\n        if (err instanceof Error) {\n            const stack = err && err.stack;\n            const message = err && err.message;\n\n            if (stack && message) {\n                if (stack.indexOf(message) !== -1) {\n                    return stack;\n                } else {\n                    return `${ message }\\n${ stack }`;\n                }\n            } else if (stack) {\n                return stack;\n            } else if (message) {\n                return message;\n            }\n        }\n\n        if (typeof err.toString === 'function') {\n            return err.toString();\n        }\n\n        return Object.prototype.toString.call(err);\n\n    } catch (newErr) { // eslint-disable-line unicorn/catch-error-name\n        return `Error while stringifying error: ${ stringifyError(newErr, level + 1) }`;\n    }\n}\n","/* @flow */\n\nimport { config } from './config';\nimport { responder } from './responder';\nimport { isLatest, getVersion, isCheckoutXComponent } from './component';\nimport { loadScript, warn, parseQuery, stringifyError } from './util';\n\nconst integrationResponder = responder();\n\nexport function onLoadCheckoutIntegration(callback : (err : ?Error, result : ?mixed) => void) : void {\n    return integrationResponder.listen(callback);\n}\n\nfunction getIntegrationURLs() : { latest : boolean, major : string, minor : string } {\n\n    return {\n        latest: isLatest(),\n        major:  config.checkoutjs_url.replace('{version}', ''),\n        minor:  config.checkoutjs_url.replace('{version}', `.${ getVersion() }`)\n    };\n}\n\nfunction getIntegrationProps() : Object {\n\n    const props : Object = { ...config.script_props };\n\n    const query = parseQuery();\n\n    if (query.env) {\n        props['data-env'] = query.env;\n    }\n\n    if (query.stage) {\n        props['data-stage'] = query.stage;\n    }\n\n    return props;\n}\n\nfunction loadCheckoutIntegration(callback : (err : ?Error, result : ?mixed) => void) : void {\n\n    if (!isCheckoutXComponent()) {\n        return callback(null, null);\n    }\n\n    const urls = getIntegrationURLs();\n    const props = getIntegrationProps();\n\n    loadScript(urls.latest ? urls.major : urls.minor, config.xchild_global, props, (err, result) => {\n\n        if (err && !urls.latest) {\n            return loadScript(`${ urls.major }?t=${ Date.now() }`, config.xchild_global, props, callback);\n        }\n\n        return callback(err, result);\n    });\n}\n\nloadCheckoutIntegration((err : ?Error, result : ?mixed) : void => {\n\n    if (err) {\n        warn('Failed to load checkout.js', stringifyError(err));\n    }\n\n    if (err || result) {\n        return integrationResponder.respond(err, result);\n    }\n});\n","/* @flow */\n\nexport { onLoadCheckoutIntegration } from './load';\nexport { isCheckoutXComponent } from './component';\n","/* @flow */\n\nexport function extendNamespace(xports : Object, namespaces : $ReadOnlyArray<string> = [], childnamespaces : $ReadOnlyArray<string> = []) : Object {\n\n    for (const name of namespaces) {\n        const namespace = window[name];\n\n        if (!namespace) {\n            continue;\n        }\n\n        for (const childname of childnamespaces) {\n            let childnamespace = xports[childname];\n\n            if (namespace[childname]) {\n                childnamespace = { ...namespace[childname], ...childnamespace };\n            }\n\n            xports = { ...namespace, ...xports, [ childname ]: childnamespace };\n        }\n    }\n\n    for (const name of namespaces) {\n        window[name] = xports;\n    }\n\n    return xports;\n}\n","/* @flow */\n\nimport { extendNamespace } from '../lib/namespace';\n\nconst _interface = require('./interface'); // eslint-disable-line import/no-commonjs\n\nextendNamespace(_interface, [ 'paypal' ]);\n"],"sourceRoot":""}